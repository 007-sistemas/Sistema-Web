/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function(){function i(){}function u(n){return n}function ot(n){return!!n}function c(n){return!n}function s(n){return function(){if(n===null)throw new Error("Callback was already called.");n.apply(this,arguments);n=null}}function o(n){return function(){n!==null&&(n.apply(this,arguments),n=null)}}function k(n){return f(n)||typeof n.length=="number"&&n.length>=0&&n.length%1==0}function r(n,t){for(var i=-1,r=n.length;++i<r;)t(n[i],i,n)}function h(n,t){for(var i=-1,r=n.length,u=Array(r);++i<r;)u[i]=t(n[i],i,n);return u}function ht(n){return h(Array(n),function(n,t){return t})}function kt(n,t,i){return r(n,function(n,r,u){i=t(i,n,r,u)}),i}function dt(n,t){r(a(n),function(i){t(n[i],i)})}function ct(n,t){for(var i=0;i<n.length;i++)if(n[i]===t)return i;return-1}function d(n){var t=-1,i,r;return k(n)?(i=n.length,function(){return t++,t<i?t:null}):(r=a(n),i=r.length,function(){return t++,t<i?r[t]:null})}function t(n,t){return t=t==null?n.length-1:+t,function(){for(var u=Math.max(arguments.length-t,0),r=Array(u),i=0;i<u;i++)r[i]=arguments[i+t];switch(t){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r)}}}function g(n){return function(t,i,r){return n(t,r)}}function y(n){return function(t,r,u){var e;if(u=o(u||i),t=t||[],e=d(t),n<=0)return u(null);var h=!1,f=0,c=!1;(function l(){if(h&&f<=0)return u(null);while(f<n&&!c){var i=e();if(i===null){h=!0;f<=0&&u(null);return}f+=1;r(t[i],i,s(function(n){f-=1;n?(u(n),c=!0):l()}))}})()}}function p(t){return function(i,r,u){return t(n.eachOf,i,r,u)}}function tt(n){return function(t,i,r,u){return n(y(i),t,r,u)}}function w(t){return function(i,r,u){return t(n.eachOfSeries,i,r,u)}}function it(n,t,r,u){u=o(u||i);t=t||[];var f=k(t)?[]:{};n(t,function(n,t,i){r(n,function(n,r){f[t]=r;i(n)})},function(n){u(n,f)})}function b(n,t,i,r){var u=[];n(t,function(n,t,r){i(n,function(i){i&&u.push({index:t,value:n});r()})},function(){r(h(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})}function rt(n,t,i,r){b(n,t,function(n,t){i(n,function(n){t(!n)})},r)}function e(n,t,i){return function(r,u,f,e){function o(){e&&e(i(!1,void 0))}function s(n,r,u){if(!e)return u();f(n,function(r){e&&t(r)&&(e(i(!0,n)),e=f=!1);u()})}arguments.length>3?n(r,u,s,o):(e=f,f=u,n(r,s,o))}}function ut(n,t){return t}function ft(n,r,u){u=u||i;var f=k(r)?[]:{};n(r,function(n,i,r){n(t(function(n,t){t.length<=1&&(t=t[0]);f[i]=t;r(n)}))},function(n){u(n,f)})}function lt(n,t,i,r){var u=[];n(t,function(n,t,r){i(n,function(n,t){u=u.concat(t||[]);r(n)})},function(n){r(n,u)})}function at(t,u,e){function a(t,u,e,o){if(o!=null&&typeof o!="function")throw new Error("task callback must be a function");if(t.started=!0,f(u)||(u=[u]),u.length===0&&t.idle())return n.setImmediate(function(){t.drain()});r(u,function(n){var r={data:n,callback:o||i};e?t.tasks.unshift(r):t.tasks.push(r);t.tasks.length===t.concurrency&&t.saturated()});n.setImmediate(t.process)}function v(n,t){return function(){c-=1;var i=!1,u=arguments;r(t,function(n){r(l,function(t,r){t!==n||i||(l.splice(r,1),i=!0)});n.callback.apply(n,u)});n.tasks.length+c===0&&n.drain();n.process()}}if(u==null)u=1;else if(u===0)throw new Error("Concurrency must not be zero");var c=0,l=[],o={tasks:[],concurrency:u,payload:e,saturated:i,empty:i,drain:i,started:!1,paused:!1,push:function(n,t){a(o,n,!1,t)},kill:function(){o.drain=i;o.tasks=[]},unshift:function(n,t){a(o,n,!0,t)},process:function(){var n,i,r;if(!o.paused&&c<o.concurrency&&o.tasks.length)while(c<o.concurrency&&o.tasks.length)n=o.payload?o.tasks.splice(0,o.payload):o.tasks.splice(0,o.tasks.length),i=h(n,function(n){return n.data}),o.tasks.length===0&&o.empty(),c+=1,l.push(n[0]),r=s(v(o,n)),t(i,r)},length:function(){return o.tasks.length},running:function(){return c},workersList:function(){return l},idle:function(){return o.tasks.length+c===0},pause:function(){o.paused=!0},resume:function(){var i,t;if(o.paused!==!1)for(o.paused=!1,i=Math.min(o.concurrency,o.tasks.length),t=1;t<=i;t++)n.setImmediate(o.process)}};return o}function vt(n){return t(function(i,u){i.apply(null,u.concat([t(function(t,i){typeof console=="object"&&(t?console.error&&console.error(t):console[n]&&r(i,function(t){console[n](t)}))})]))})}function yt(n){return function(t,i,r){n(ht(t),i,r)}}function pt(n){return t(function(i,r){var u=t(function(t){var r=this,u=t.pop();return n(i,function(n,i,u){n.apply(r,t.concat([u]))},u)});return r.length?u.apply(this,r):u})}function et(i){return t(function(t){var u=t.pop(),r;t.push(function(){var t=arguments;r?n.setImmediate(function(){u.apply(null,t)}):u.apply(null,t)});r=!0;i.apply(this,t);r=!1})}var n={},st,l=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||this,a,v,nt;l!=null&&(st=l.async);n.noConflict=function(){return l.async=st,n};var wt=Object.prototype.toString,f=Array.isArray||function(n){return wt.call(n)==="[object Array]"},bt=function(n){var t=typeof n;return t==="function"||t==="object"&&!!n};a=Object.keys||function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(i);return t};v=typeof setImmediate=="function"&&setImmediate;nt=v?function(n){v(n)}:function(n){setTimeout(n,0)};n.nextTick=typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:nt;n.setImmediate=v?nt:n.nextTick;n.forEach=n.each=function(t,i,r){return n.eachOf(t,g(i),r)};n.forEachSeries=n.eachSeries=function(t,i,r){return n.eachOfSeries(t,g(i),r)};n.forEachLimit=n.eachLimit=function(n,t,i,r){return y(t)(n,g(i),r)};n.forEachOf=n.eachOf=function(n,t,r){function h(n){f--;n?r(n):u===null&&f<=0&&r(null)}r=o(r||i);n=n||[];for(var e=d(n),u,f=0;(u=e())!=null;)f+=1,t(n[u],u,s(h));f===0&&r(null)};n.forEachOfSeries=n.eachOfSeries=function(t,r,u){function e(){var i=!0;if(f===null)return u(null);r(t[f],f,s(function(t){if(t)u(t);else{if(f=h(),f===null)return u(null);i?n.setImmediate(e):e()}}));i=!1}u=o(u||i);t=t||[];var h=d(t),f=h();e()};n.forEachOfLimit=n.eachOfLimit=function(n,t,i,r){y(t)(n,i,r)};n.map=p(it);n.mapSeries=w(it);n.mapLimit=tt(it);n.inject=n.foldl=n.reduce=function(t,i,r,u){n.eachOfSeries(t,function(n,t,u){r(i,n,function(n,t){i=t;u(n)})},function(n){u(n,i)})};n.foldr=n.reduceRight=function(t,i,r,f){var e=h(t,u).reverse();n.reduce(e,i,r,f)};n.transform=function(t,i,r,u){arguments.length===3&&(u=r,r=i,i=f(t)?[]:{});n.eachOf(t,function(n,t,u){r(i,n,t,u)},function(n){u(n,i)})};n.select=n.filter=p(b);n.selectLimit=n.filterLimit=tt(b);n.selectSeries=n.filterSeries=w(b);n.reject=p(rt);n.rejectLimit=tt(rt);n.rejectSeries=w(rt);n.any=n.some=e(n.eachOf,ot,u);n.someLimit=e(n.eachOfLimit,ot,u);n.all=n.every=e(n.eachOf,c,c);n.everyLimit=e(n.eachOfLimit,c,c);n.detect=e(n.eachOf,u,ut);n.detectSeries=e(n.eachOfSeries,u,ut);n.detectLimit=e(n.eachOfLimit,u,ut);n.sortBy=function(t,i,r){function u(n,t){var i=n.criteria,r=t.criteria;return i<r?-1:i>r?1:0}n.map(t,function(n,t){i(n,function(i,r){i?t(i):t(null,{value:n,criteria:r})})},function(n,t){if(n)return r(n);r(null,h(t.sort(u),function(n){return n.value}))})};n.auto=function(u,e,s){function p(n){v.unshift(n)}function w(n){var t=ct(v,n);t>=0&&v.splice(t,1)}function b(){c--;r(v.slice(0),function(n){n()})}var y,c;if(s||(s=e,e=null),s=o(s||i),y=a(u),c=y.length,!c)return s(null);e||(e=c);var h={},l=0,v=[];p(function(){c||s(null,h)});r(y,function(i){function y(){return l<e&&kt(o,function(n,t){return n&&h.hasOwnProperty(t)},!0)&&!h.hasOwnProperty(i)}function k(){y()&&(l++,w(k),r[r.length-1](a,h))}for(var r=f(u[i])?u[i]:[u[i]],a=t(function(t,r){if(l--,r.length<=1&&(r=r[0]),t){var u={};dt(h,function(n,t){u[t]=n});u[i]=r;s(t,u)}else h[i]=r,n.setImmediate(b)}),o=r.slice(0,r.length-1),v=o.length,c;v--;){if(!(c=u[o[v]]))throw new Error("Has inexistant dependency");if(f(c)&&ct(c,i)>=0)throw new Error("Has cyclic dependencies");}y()?(l++,r[r.length-1](a,h)):p(k)})};n.retry=function(t,i,r){function c(n,t){if(typeof t=="number")n.times=parseInt(t,10)||f;else if(typeof t=="object")n.times=parseInt(t.times,10)||f,n.interval=parseInt(t.interval,10)||s;else throw new Error("Unsupported argument type for 'times': "+typeof t);}function h(t,i){function f(n,t){return function(r){n(function(n,i){r(!n||t,{err:n,result:i})},i)}}function o(n){return function(t){setTimeout(function(){t(null)},n)}}while(u.times){var r=!(u.times-=1);e.push(f(u.task,r));!r&&u.interval>0&&e.push(o(u.interval))}n.series(e,function(n,i){i=i[i.length-1];(t||u.callback)(i.err,i.result)})}var f=5,s=0,e=[],u={times:f,interval:s},o=arguments.length;if(o<1||o>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");else o<=2&&typeof t=="function"&&(r=i,i=t);return typeof t!="function"&&c(u,t),u.callback=r,u.task=i,u.callback?h():h};n.waterfall=function(r,u){function e(n){return t(function(t,i){if(t)u.apply(null,[t].concat(i));else{var r=n.next();r?i.push(e(r)):i.push(u);et(n).apply(null,i)}})}if(u=o(u||i),!f(r)){var s=new Error("First argument to waterfall must be an array of functions");return u(s)}if(!r.length)return u();e(n.iterator(r))()};n.parallel=function(t,i){ft(n.eachOf,t,i)};n.parallelLimit=function(n,t,i){ft(y(t),n,i)};n.series=function(t,i){ft(n.eachOfSeries,t,i)};n.iterator=function(n){function t(i){function r(){return n.length&&n[i].apply(null,arguments),r.next()}return r.next=function(){return i<n.length-1?t(i+1):null},r}return t(0)};n.apply=t(function(n,i){return t(function(t){return n.apply(null,i.concat(t))})});n.concat=p(lt);n.concatSeries=w(lt);n.whilst=function(n,r,u){if(u=u||i,n()){var f=t(function(t,i){t?u(t):n.apply(this,i)?r(f):u(null)});r(f)}else u(null)};n.doWhilst=function(t,i,r){var u=0;return n.whilst(function(){return++u<=1||i.apply(this,arguments)},t,r)};n.until=function(t,i,r){return n.whilst(function(){return!t.apply(this,arguments)},i,r)};n.doUntil=function(t,i,r){return n.doWhilst(t,function(){return!i.apply(this,arguments)},r)};n.during=function(n,r,u){u=u||i;var e=t(function(t,i){t?u(t):(i.push(f),n.apply(this,i))}),f=function(n,t){n?u(n):t?r(e):u(null)};n(f)};n.doDuring=function(t,i,r){var u=0;n.during(function(n){u++<1?n(null,!0):i.apply(this,arguments)},t,r)};n.queue=function(n,t){return at(function(t,i){n(t[0],i)},t,1)};n.priorityQueue=function(t,u){function o(n,t){return n.priority-t.priority}function s(n,t,i){for(var r=-1,f=n.length-1,u;r<f;)u=r+(f-r+1>>>1),i(t,n[u])>=0?r=u:f=u-1;return r}function h(t,u,e,h){if(h!=null&&typeof h!="function")throw new Error("task callback must be a function");if(t.started=!0,f(u)||(u=[u]),u.length===0)return n.setImmediate(function(){t.drain()});r(u,function(r){var u={data:r,priority:e,callback:typeof h=="function"?h:i};t.tasks.splice(s(t.tasks,u,o)+1,0,u);t.tasks.length===t.concurrency&&t.saturated();n.setImmediate(t.process)})}var e=n.queue(t,u);return e.push=function(n,t,i){h(e,n,t,i)},delete e.unshift,e};n.cargo=function(n,t){return at(n,1,t)};n.log=vt("log");n.dir=vt("dir");n.memoize=function(i,r){var e={},f={},o;return r=r||u,o=t(function(u){var s=u.pop(),o=r.apply(null,u);o in e?n.setImmediate(function(){s.apply(null,e[o])}):o in f?f[o].push(s):(f[o]=[s],i.apply(null,u.concat([t(function(n){var i,t,r;for(e[o]=n,i=f[o],delete f[o],t=0,r=i.length;t<r;t++)i[t].apply(null,n)})])))}),o.memo=e,o.unmemoized=i,o};n.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}};n.times=yt(n.map);n.timesSeries=yt(n.mapSeries);n.timesLimit=function(t,i,r,u){return n.mapLimit(ht(t),i,r,u)};n.seq=function(){var r=arguments;return t(function(u){var e=this,f=u[u.length-1];typeof f=="function"?u.pop():f=i;n.reduce(r,u,function(n,i,r){i.apply(e,n.concat([t(function(n,t){r(n,t)})]))},function(n,t){f.apply(e,[n].concat(t))})})};n.compose=function(){return n.seq.apply(null,Array.prototype.reverse.call(arguments))};n.applyEach=pt(n.eachOf);n.applyEachSeries=pt(n.eachOfSeries);n.forever=function(n,t){function r(n){if(n)return u(n);f(r)}var u=s(t||i),f=et(n);r()};n.ensureAsync=et;n.constant=t(function(n){var t=[null].concat(n);return function(n){return n.apply(this,t)}});n.wrapSync=n.asyncify=function(n){return t(function(t){var r=t.pop(),i;try{i=n.apply(this,t)}catch(u){return r(u)}bt(i)&&typeof i.then=="function"?i.then(function(n){r(null,n)})["catch"](function(n){r(n.message?n:new Error(n))}):r(null,i)})};typeof module=="object"&&module.exports?module.exports=n:typeof define=="function"&&define.amd?define("async",function(){return n}):l.async=n})(),function(n){"use strict";typeof define=="function"&&define.amd?define("sha1",[],n):window.sha1=n()}(function(){var n=function(){function t(n){for(var i="",t=7;t>=0;t--)i+=e.charAt(n>>t*4&15);return i}function o(n){for(var r=(n.length+8>>6)+1,i=new Array(r*16),t=0;t<r*16;t++)i[t]=0;for(t=0;t<n.length;t++)i[t>>2]|=n.charCodeAt(t)<<24-t%4*8;return i[t>>2]|=128<<24-t%4*8,i[r*16-1]=n.length*8,i}function s(n){for(var r=n.length+1>>1,u=(r+8>>6)+1,i=new Array(u*16),t=0;t<u*16;t++)i[t]=0;for(t=0;t<r;t++)i[t>>2]|=parseInt(n.substr(2*t,2),16)<<24-t%4*8;return i[t>>2]|=128<<24-t%4*8,i[u*16-1]=r*8,i}function u(n,t,i){for(var f=(i+8>>6)+1,u=new Array(f*16),r=0;r<f*16;r++)u[r]=0;for(r=0;r<i;r++)u[r>>2]|=(n[t+r]&255)<<24-r%4*8;return u[r>>2]|=128<<24-r%4*8,u[f*16-1]=i*8,u}function n(n,t){var i=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(i>>16);return r<<16|i&65535}function r(n,t){return n<<t|n>>>32-t}function h(n,t,i,r){return n<20?t&i|~t&r:n<40?t^i^r:n<60?t&i|t&r|i&r:t^i^r}function c(n){return n<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514}function l(n){return i(o(n))}function a(n){return i(s(n))}function v(n){return i(u(n,0,n.length))}function y(n,t,r){return i(u(n,t,r))}function i(n){var i=f(n);return t(i[0])+t(i[1])+t(i[2])+t(i[3])+t(i[4])}function f(t){for(var i,v,s=new Array(80),u=1732584193,f=-271733879,e=-1732584194,o=271733878,l=-1009589776,a=0;a<t.length;a+=16){var y=u,p=f,w=e,b=o,k=l;for(i=0;i<80;i++)s[i]=i<16?t[a+i]:r(s[i-3]^s[i-8]^s[i-14]^s[i-16],1),v=n(n(r(u,5),h(i,f,e,o)),n(n(l,s[i]),c(i))),l=o,o=e,e=r(f,30),f=u,u=v;u=n(u,y);f=n(f,p);e=n(e,w);o=n(o,b);l=n(l,k)}return[u,f,e,o,l]}var e="0123456789abcdef";return{calcSHA1:l,calcSHA1Hex:a,calcSHA1BA:v,calcSHA1BAEx:y}};return n()}),function(n){"use strict";typeof define=="function"&&define.amd?define("sjcl",[],n):window.sjcl=n()}(function(){function t(n){throw n;}function e(i,r,u){4!==r.length&&t(new n.exception.invalid("invalid aes block size"));var f=i.a[u],o=r[0]^f[0],s=r[u?3:1]^f[1],h=r[2]^f[2];r=r[u?1:3]^f[3];var e,w,b,d=f.length/4-2,c,l=4,k=[0,0,0,0];e=i.j[u];i=e[0];var a=e[1],v=e[2],y=e[3],p=e[4];for(c=0;c<d;c++)e=i[o>>>24]^a[s>>16&255]^v[h>>8&255]^y[r&255]^f[l],w=i[s>>>24]^a[h>>16&255]^v[r>>8&255]^y[o&255]^f[l+1],b=i[h>>>24]^a[r>>16&255]^v[o>>8&255]^y[s&255]^f[l+2],r=i[r>>>24]^a[o>>16&255]^v[s>>8&255]^y[h&255]^f[l+3],l+=4,o=e,s=w,h=b;for(c=0;4>c;c++)k[u?3&-c:c]=p[o>>>24]<<24^p[s>>16&255]<<16^p[h>>8&255]<<8^p[r&255]^f[l++],e=o,o=s,s=h,h=r,r=e;return k}function o(n,t){for(var r,o,s=t.slice(0),i=n.q,p=n.a,v=i[0],f=i[1],h=i[2],l=i[3],e=i[4],a=i[5],c=i[6],y=i[7],u=0;64>u;u++)16>u?r=s[u]:(r=s[u+1&15],o=s[u+14&15],r=s[u&15]=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+s[u&15]+s[u+9&15]|0),r=r+y+(e>>>6^e>>>11^e>>>25^e<<26^e<<21^e<<7)+(c^e&(a^c))+p[u],y=c,c=a,a=e,e=l+r|0,l=h,h=f,f=v,v=r+(f&h^l&(f^h))+(f>>>2^f>>>13^f>>>22^f<<30^f<<19^f<<10)|0;i[0]=i[0]+v|0;i[1]=i[1]+f|0;i[2]=i[2]+h|0;i[3]=i[3]+l|0;i[4]=i[4]+e|0;i[5]=i[5]+a|0;i[6]=i[6]+c|0;i[7]=i[7]+y|0}function s(t,i){var r,u=n.random.z[t],f=[];for(r in u)u.hasOwnProperty(r)&&f.push(u[r]);for(r=0;r<f.length;r++)f[r](i)}function h(t){t.a=u(t).concat(u(t));t.A=new n.cipher.aes(t.a)}function u(n){for(var t=0;4>t&&!(n.e[t]=n.e[t]+1|0,n.e[t]);t++);return n.A.encrypt(n.e)}var i=void 0,r=!1,n={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(n){this.toString=function(){return"CORRUPT: "+this.message};this.message=n},invalid:function(n){this.toString=function(){return"INVALID: "+this.message};this.message=n},bug:function(n){this.toString=function(){return"BUG: "+this.message};this.message=n},notReady:function(n){this.toString=function(){return"NOT READY: "+this.message};this.message=n}}},f;"undefined"!=typeof module&&module.exports&&(module.exports=n);n.cipher.aes=function(i){var r,u,e,h,f,o,s;for(this.j[0][0][0]||this.D(),f=this.j[0][4],o=this.j[1],r=i.length,s=1,4!==r&&6!==r&&8!==r&&t(new n.exception.invalid("invalid aes key size")),this.a=[e=i.slice(0),h=[]],i=r;i<4*r+28;i++)u=e[i-1],(0==i%r||8===r&&4==i%r)&&(u=f[u>>>24]<<24^f[u>>16&255]<<16^f[u>>8&255]<<8^f[u&255],0==i%r&&(u=u<<8^u>>>24^s<<24,s=s<<1^283*(s>>7))),e[i]=e[i-r]^u;for(r=0;i;r++,i--)u=e[r&3?i:i-4],h[r]=4>=i||4>r?u:o[0][f[u>>>24]]^o[1][f[u>>16&255]]^o[2][f[u>>8&255]]^o[3][f[u&255]]};n.cipher.aes.prototype={encrypt:function(n){return e(this,n,0)},decrypt:function(n){return e(this,n,1)},j:[[[],[],[],[],[]],[[],[],[],[],[]]],D:function(){for(var e=this.j[0],o=this.j[1],c=e[4],a=o[4],i,r,f=[],l=[],h,u,t,s,n=0;256>n;n++)l[(f[n]=n<<1^283*(n>>7))^n]=n;for(i=r=0;!c[i];i^=h||1,r=l[r]||1)for(t=r^r<<1^r<<2^r<<3^r<<4,t=t>>8^t&255^99,c[i]=t,a[t]=i,u=f[n=f[h=f[i]]],s=16843009*u^65537*n^257*h^16843008*i,u=257*f[t]^16843008*t,n=0;4>n;n++)e[n][i]=u=u<<24^u>>>8,o[n][t]=s=s<<24^s>>>8;for(n=0;5>n;n++)e[n]=e[n].slice(0),o[n]=o[n].slice(0)}};n.bitArray={bitSlice:function(t,r,u){return t=n.bitArray.O(t.slice(r/32),32-(r&31)).slice(1),u===i?t:n.bitArray.clamp(t,u-r)},extract:function(n,t,i){var r=Math.floor(-t-i&31);return((t+i-1^t)&-32?n[t/32|0]<<32-r^n[t/32+1|0]>>>r:n[t/32|0]>>>r)&(1<<i)-1},concat:function(t,i){if(0===t.length||0===i.length)return t.concat(i);var r=t[t.length-1],u=n.bitArray.getPartial(r);return 32===u?t.concat(i):n.bitArray.O(i,u,r|0,t.slice(0,t.length-1))},bitLength:function(t){var i=t.length;return 0===i?0:32*(i-1)+n.bitArray.getPartial(t[i-1])},clamp:function(t,i){if(32*t.length<i)return t;t=t.slice(0,Math.ceil(i/32));var r=t.length;return i&=31,0<r&&i&&(t[r-1]=n.bitArray.partial(i,t[r-1]&2147483648>>i-1,1)),t},partial:function(n,t,i){return 32===n?t:(i?t|0:t<<32-n)+1099511627776*n},getPartial:function(n){return Math.round(n/1099511627776)||32},equal:function(t,i){if(n.bitArray.bitLength(t)!==n.bitArray.bitLength(i))return r;for(var f=0,u=0;u<t.length;u++)f|=t[u]^i[u];return 0===f},O:function(t,r,u,f){var e;for(e=0,f===i&&(f=[]);32<=r;r-=32)f.push(u),u=0;if(0===r)return f.concat(t);for(e=0;e<t.length;e++)f.push(u|t[e]>>>r),u=t[e]<<32-r;return e=t.length?t[t.length-1]:0,t=n.bitArray.getPartial(e),f.push(n.bitArray.partial(r+t&31,32<r+t?u:f.pop(),1)),f},k:function(n,t){return[n[0]^t[0],n[1]^t[1],n[2]^t[2],n[3]^t[3]]}};n.codec.utf8String={fromBits:function(t){for(var u="",f=n.bitArray.bitLength(t),r,i=0;i<f/8;i++)0==(i&3)&&(r=t[i/4]),u+=String.fromCharCode(r>>>24),r<<=8;return decodeURIComponent(escape(u))},toBits:function(t){t=unescape(encodeURIComponent(t));for(var u=[],r=0,i=0;i<t.length;i++)r=r<<8|t.charCodeAt(i),3==(i&3)&&(u.push(r),r=0);return i&3&&u.push(n.bitArray.partial(8*(i&3),r)),u}};n.codec.hex={fromBits:function(t){for(var r="",i=0;i<t.length;i++)r+=((t[i]|0)+0xf00000000000).toString(16).substr(4);return r.substr(0,n.bitArray.bitLength(t)/4)},toBits:function(t){var i,r=[],u;for(t=t.replace(/\s|0x/g,""),u=t.length,t+="00000000",i=0;i<t.length;i+=8)r.push(parseInt(t.substr(i,8),16)^0);return n.bitArray.clamp(r,4*u)}};n.codec.base64={I:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,i,r){var u="",f=0,e=n.codec.base64.I,o=0,s=n.bitArray.bitLength(t);for(r&&(e=e.substr(0,62)+"-_"),r=0;6*u.length<s;)u+=e.charAt((o^t[r]>>>f)>>>26),6>f?(o=t[r]<<6-f,f+=26,r++):(o<<=6,f-=6);for(;u.length&3&&!i;)u+="=";return u},toBits:function(i,r){i=i.replace(/\s|=/g,"");var s=[],e,u=0,h=n.codec.base64.I,o=0,f;for(r&&(h=h.substr(0,62)+"-_"),e=0;e<i.length;e++)f=h.indexOf(i.charAt(e)),0>f&&t(new n.exception.invalid("this isn't base64!")),26<u?(u-=26,s.push(o^f>>>u),o=f<<32-u):(u+=6,o^=f<<32-u);return u&56&&s.push(n.bitArray.partial(u&56,o,1)),s}};n.codec.base64url={fromBits:function(t){return n.codec.base64.fromBits(t,1,1)},toBits:function(t){return n.codec.base64.toBits(t,1)}};n.hash.sha256=function(n){this.a[0]||this.D();n?(this.q=n.q.slice(0),this.m=n.m.slice(0),this.g=n.g):this.reset()};n.hash.sha256.hash=function(t){return(new n.hash.sha256).update(t).finalize()};n.hash.sha256.prototype={blockSize:512,reset:function(){return this.q=this.M.slice(0),this.m=[],this.g=0,this},update:function(t){"string"==typeof t&&(t=n.codec.utf8String.toBits(t));var i,r=this.m=n.bitArray.concat(this.m,t);for(i=this.g,t=this.g=i+n.bitArray.bitLength(t),i=512+i&-512;i<=t;i+=512)o(this,r.splice(0,16));return this},finalize:function(){for(var t=this.m,r=this.q,t=n.bitArray.concat(t,[n.bitArray.partial(1,1)]),i=t.length+2;i&15;i++)t.push(0);for(t.push(Math.floor(this.g/4294967296)),t.push(this.g|0);t.length;)o(this,t.splice(0,16));return this.reset(),r},M:[],a:[],D:function(){function r(n){return 4294967296*(n-Math.floor(n))|0}var n=0,t=2,i;n:for(;64>n;t++){for(i=2;i*i<=t;i++)if(0==t%i)continue n;8>n&&(this.M[n]=r(Math.pow(t,.5)));this.a[n]=r(Math.pow(t,1/3));n++}}};n.mode.ccm={name:"ccm",encrypt:function(i,r,u,f,e){var o,s=r.slice(0),h=n.bitArray,c=h.bitLength(u)/8,l=h.bitLength(s)/8;for(e=e||64,f=f||[],7>c&&t(new n.exception.invalid("ccm: iv must be at least 7 bytes")),o=2;4>o&&l>>>8*o;o++);return o<15-c&&(o=15-c),u=h.clamp(u,8*(15-o)),r=n.mode.ccm.K(i,r,u,f,e,o),s=n.mode.ccm.n(i,s,u,r,e,o),h.concat(s.data,s.tag)},decrypt:function(i,r,u,f,e){e=e||64;f=f||[];var o=n.bitArray,c=o.bitLength(u)/8,h=o.bitLength(r),s=o.clamp(r,h-e),l=o.bitSlice(r,h-e),h=(h-e)/8;for(7>c&&t(new n.exception.invalid("ccm: iv must be at least 7 bytes")),r=2;4>r&&h>>>8*r;r++);return r<15-c&&(r=15-c),u=o.clamp(u,8*(15-r)),s=n.mode.ccm.n(i,s,u,l,e,r),i=n.mode.ccm.K(i,s.data,u,f,e,r),o.equal(s.tag,i)||t(new n.exception.corrupt("ccm: tag doesn't match")),s.data},K:function(i,r,u,f,e,o){var h=[],s=n.bitArray,c=s.k;if(e/=8,(e%2||4>e||16<e)&&t(new n.exception.invalid("ccm: invalid tag length")),(4294967295<f.length||4294967295<r.length)&&t(new n.exception.bug("ccm: can't deal with 4GiB or more data")),o=[s.partial(8,(f.length?64:0)|e-2<<2|o-1)],o=s.concat(o,u),o[3]|=s.bitLength(r)/8,o=i.encrypt(o),f.length)for(u=s.bitLength(f)/8,65279>=u?h=[s.partial(16,u)]:4294967295>=u&&(h=s.concat([s.partial(16,65534)],[u])),h=s.concat(h,f),f=0;f<h.length;f+=4)o=i.encrypt(c(o,h.slice(f,f+4).concat([0,0,0])));for(f=0;f<r.length;f+=4)o=i.encrypt(c(o,r.slice(f,f+4).concat([0,0,0])));return s.clamp(o,8*e)},n:function(t,i,r,u,f,e){var o,s=n.bitArray,h,c;if(o=s.k,h=i.length,c=s.bitLength(i),r=s.concat([s.partial(8,e-1)],r).concat([0,0,0]).slice(0,4),u=s.bitSlice(o(u,t.encrypt(r)),0,f),!h)return{tag:u,data:[]};for(o=0;o<h;o+=4)r[3]++,f=t.encrypt(r),i[o]^=f[0],i[o+1]^=f[1],i[o+2]^=f[2],i[o+3]^=f[3];return{tag:u,data:s.clamp(i,c)}}};n.mode.ocb2={name:"ocb2",encrypt:function(i,r,u,f,e,o){var l,v;128!==n.bitArray.bitLength(u)&&t(new n.exception.invalid("ocb iv must be 128 bits"));var h,y=n.mode.ocb2.G,a=n.bitArray,s=a.k,c=[0,0,0,0];for(u=y(i.encrypt(u)),v=[],f=f||[],e=e||64,h=0;h+4<r.length;h+=4)l=r.slice(h,h+4),c=s(c,l),v=v.concat(s(u,i.encrypt(s(u,l)))),u=y(u);return l=r.slice(h),r=a.bitLength(l),h=i.encrypt(s(u,[0,0,0,r])),l=a.clamp(s(l.concat([0,0,0]),h),r),c=s(c,s(l.concat([0,0,0]),h)),c=i.encrypt(s(c,s(u,y(u)))),f.length&&(c=s(c,o?f:n.mode.ocb2.pmac(i,f))),v.concat(a.concat(l,a.clamp(c,e)))},decrypt:function(i,r,u,f,e,o){128!==n.bitArray.bitLength(u)&&t(new n.exception.invalid("ocb iv must be 128 bits"));e=e||64;var y=n.mode.ocb2.G,a=n.bitArray,s=a.k,h=[0,0,0,0],l=y(i.encrypt(u)),c,v,p=n.bitArray.bitLength(r)-e,w=[];for(f=f||[],u=0;u+4<p/32;u+=4)c=s(l,i.decrypt(s(l,r.slice(u,u+4)))),h=s(h,c),w=w.concat(c),l=y(l);return v=p-32*u,c=i.encrypt(s(l,[0,0,0,v])),c=s(c,a.clamp(r.slice(u),v).concat([0,0,0])),h=s(h,c),h=i.encrypt(s(h,s(l,y(l)))),f.length&&(h=s(h,o?f:n.mode.ocb2.pmac(i,f))),a.equal(a.clamp(h,e),a.bitSlice(r,p))||t(new n.exception.corrupt("ocb: tag doesn't match")),w.concat(a.clamp(c,v))},pmac:function(t,i){for(var e=n.mode.ocb2.G,s=n.bitArray,f=s.k,o=[0,0,0,0],u=t.encrypt([0,0,0,0]),u=f(u,e(e(u))),r=0;r+4<i.length;r+=4)u=e(u),o=f(o,t.encrypt(f(u,i.slice(r,r+4))));return r=i.slice(r),128>s.bitLength(r)&&(u=f(u,e(u)),r=s.concat(r,[-2147483648,0,0,0])),o=f(o,r),t.encrypt(f(e(f(u,e(u))),o))},G:function(n){return[n[0]<<1^n[1]>>>31,n[1]<<1^n[2]>>>31,n[2]<<1^n[3]>>>31,n[3]<<1^135*(n[0]>>>31)]}};n.mode.gcm={name:"gcm",encrypt:function(t,i,r,u,f){var e=i.slice(0);return i=n.bitArray,u=u||[],t=n.mode.gcm.n(!0,t,e,u,r,f||128),i.concat(t.data,t.tag)},decrypt:function(i,u,f,e,o){var s=u.slice(0),h=n.bitArray,c=h.bitLength(s);return o=o||128,e=e||[],o<=c?(u=h.bitSlice(s,c-o),s=h.bitSlice(s,0,c-o)):(u=s,s=[]),i=n.mode.gcm.n(r,i,s,e,f,o),h.equal(i.tag,u)||t(new n.exception.corrupt("gcm: tag doesn't match")),i.data},U:function(t,i){var f,u,e,r,o,s=n.bitArray.k;for(e=[0,0,0,0],r=i.slice(0),f=0;128>f;f++){for((u=0!=(t[Math.floor(f/32)]&1<<31-f%32))&&(e=s(e,r)),o=0!=(r[3]&1),u=3;0<u;u--)r[u]=r[u]>>>1|(r[u-1]&1)<<31;r[0]>>>=1;o&&(r[0]^=-520093696)}return e},f:function(t,i,r){var u,f=r.length;for(i=i.slice(0),u=0;u<f;u+=4)i[0]^=4294967295&r[u],i[1]^=4294967295&r[u+1],i[2]^=4294967295&r[u+2],i[3]^=4294967295&r[u+3],i=n.mode.gcm.U(i,t);return i},n:function(t,i,r,u,f,e){var h,s,o,c,v,p,a,y,l=n.bitArray;for(p=r.length,a=l.bitLength(r),y=l.bitLength(u),s=l.bitLength(f),h=i.encrypt([0,0,0,0]),96===s?(f=f.slice(0),f=l.concat(f,[1])):(f=n.mode.gcm.f(h,[0,0,0,0],f),f=n.mode.gcm.f(h,f,[0,0,Math.floor(s/4294967296),s&4294967295])),s=n.mode.gcm.f(h,[0,0,0,0],u),v=f.slice(0),u=s.slice(0),t||(u=n.mode.gcm.f(h,s,r)),c=0;c<p;c+=4)v[3]++,o=i.encrypt(v),r[c]^=o[0],r[c+1]^=o[1],r[c+2]^=o[2],r[c+3]^=o[3];return r=l.clamp(r,a),t&&(u=n.mode.gcm.f(h,s,r)),t=[Math.floor(y/4294967296),y&4294967295,Math.floor(a/4294967296),a&4294967295],u=n.mode.gcm.f(h,u,t),o=i.encrypt(f),u[0]^=o[0],u[1]^=o[1],u[2]^=o[2],u[3]^=o[3],{tag:l.bitSlice(u,0,e),data:r}}};n.misc.hmac=function(t,i){this.L=i=i||n.hash.sha256;var u=[[],[]],r,f=i.prototype.blockSize/32;for(this.o=[new i,new i],t.length>f&&(t=i.hash(t)),r=0;r<f;r++)u[0][r]=t[r]^909522486,u[1][r]=t[r]^1549556828;this.o[0].update(u[0]);this.o[1].update(u[1])};n.misc.hmac.prototype.encrypt=n.misc.hmac.prototype.mac=function(n){return n=new this.L(this.o[0]).update(n).finalize(),new this.L(this.o[1]).update(n).finalize()};n.misc.pbkdf2=function(i,r,u,f,e){u=u||1e3;(0>f||0>u)&&t(n.exception.invalid("invalid params to pbkdf2"));"string"==typeof i&&(i=n.codec.utf8String.toBits(i));e=e||n.misc.hmac;i=new e(i);for(var s,c,h,o=[],a=n.bitArray,l=1;32*o.length<(f||1);l++){for(e=s=i.encrypt(a.concat(r,[l])),c=1;c<u;c++)for(s=i.encrypt(s),h=0;h<s.length;h++)e[h]^=s[h];o=o.concat(e)}return f&&(o=a.clamp(o,f)),o};n.prng=function(t){this.b=[new n.hash.sha256];this.h=[0];this.F=0;this.t={};